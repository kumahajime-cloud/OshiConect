<div class="post-card">
  <div class="post-header">
    <div class="user-info">
      <% if post.user.profile_image.attached? %>
        <%= image_tag post.user.profile_image, class: "user-avatar", alt: post.user.username %>
      <% else %>
        <div class="user-avatar-placeholder">
          <%= post.user.username.first %>
        </div>
      <% end %>
      <div>
        <h4 class="username"><%= link_to post.user.username, profile_path(post.user) %></h4>
        <small class="post-time"><%= time_ago_in_words(post.created_at) %>Ââç</small>
      </div>
    </div>
  </div>

  <div class="post-content">
    <%= truncate(post.content, length: 200) %>
  </div>

  <% if post.image.attached? %>
    <div class="post-image">
      <%= link_to post_path(post) do %>
        <%= image_tag post.image, alt: "ÊäïÁ®øÁîªÂÉè" %>
      <% end %>
    </div>
  <% end %>

  <div class="post-meta">
    <div class="hashtags">
      <% post.hashtags.limit(3).each do |hashtag| %>
        <%= link_to "##{hashtag.name}", hashtag_path(hashtag.name), class: "hashtag-link" %>
      <% end %>
    </div>

    <div class="post-footer">
      <% if user_signed_in? %>
        <% if current_user.liked?(post) %>
          <%= button_to unlike_post_path(post), method: :delete, class: "btn-like liked" do %>
            ‚ù§Ô∏è <%= post.likes_count %>
          <% end %>
        <% else %>
          <%= button_to like_post_path(post), method: :post, class: "btn-like" do %>
            ü§ç <%= post.likes_count %>
          <% end %>
        <% end %>
      <% else %>
        <span class="like-count">ü§ç <%= post.likes_count %></span>
      <% end %>

      <%= link_to "Ë©≥Á¥∞„ÇíË¶ã„Çã", post_path(post), class: "btn-link" %>
    </div>
  </div>
</div>
